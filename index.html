<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Management Meeting Agenda</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 10px;
    }

    h1,
    h2 {
      color: #2c3e50;
      margin-top: 10px;
      margin-bottom: 5px;
    }

    h1 {
      border-bottom: 1px solid #2c3e50;
      padding-bottom: 5px;
    }

    h2 {
      font-size: 16px;
    }

    ul,
    ol {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }

    li {
      margin-bottom: 5px;
    }

    input[type="text"],
    textarea {
      width: calc(100% - 20px);
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin-bottom: 5px;
      box-sizing: border-box;
    }

    textarea {
      height: 50px;
      resize: vertical;
    }

    button {
      background-color: #2c3e50;
      color: white;
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      display: block;
      margin: 10px auto;
    }

    button:hover {
      background-color: #34495e;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 10px;
    }

    th,
    td {
      border: 1px solid #ccc;
      padding: 5px;
      text-align: left;
    }

    th {
      background-color: #f4f4f4;
    }

    .logo-holder {
      display: flex;
      align-items: center;
    }

    .img {
      height: 80px;
      width: 80px;
      margin-right: 10px;
    }

    #signatureCanvas {
      border: 1px solid #ccc;
      border-radius: 4px;
      width: 250px;
      height: 80px;
      margin-bottom: 5px;
      display: block;
      margin: 0 auto;
    }

    #clearSignature {
      background-color: #e74c3c;
    }

    #clearSignature:hover {
      background-color: #c0392b;
    }
  </style>
</head>

<body>
  <div class="logo-holder">
    <img src="rahlogo.jpg" alt="Company Logo" class="img">
    <h2>RAH REAL ESTATE DEVELOPMENT AND TRANSPORTATION</h2>
  </div>
  <h1>Management Meeting</h1>
  <h2>MEETING AGENDA</h2>
  <form id="meetingForm">
    <ul>
      <li><strong>Date:</strong><br><input type="text" id="date" name="date" value="" required></li>
      <li><strong>Last Meeting:</strong><br><input type="text" id="lastMeeting" name="lastMeeting" value="" required></li>
      <li><strong>Purpose of Meeting:</strong><br><input type="text" id="purpose" name="purpose" value="" required></li>
      <li><strong>Time:</strong><br><input type="text" id="time" name="time" value="" required></li>
      <li><strong>Location:</strong><br><input type="text" id="location" name="location" value="" required></li>
      <li><strong>Chair:</strong><br><input type="text" id="chair" name="chair" value="" required></li>
      <li><strong>Secretary:</strong><br><input type="text" id="secretary" name="secretary" value="" required></li>
    </ul>
    <h2>Summary of Last Meeting</h2>
    <textarea id="summaryLastMeeting" name="summaryLastMeeting" rows="4" required></textarea>
    <p><strong>ATTENTION:</strong></p>
    <p>
      It is extremely important for you to read this agenda prior to attending the meeting. In order for you to be
      prepared, you must read the meeting agenda and come to the meeting prepared with any information, suggestions, or
      concerns you may have regarding the topics provided.
    </p>
    <p>
      If there is a topic not yet listed that you find important, please contact the staff member who created the agenda
      in order to provide your suggested topic. Please also provide a note for the description of points that can be
      discussed.
    </p>
    <p>
      DURING THE MEETING: Your input is important; please provide your opinions as it assists the company in its growth.
    </p>
    <h2>ATTENDEES:</h2>
    <ol>
      <li><input type="text" name="attendee1" value="" required></li>
      <li><input type="text" name="attendee2" value="" required></li>
      <li><input type="text" name="attendee3" value="" required></li>
      <li><input type="text" name="attendee4" value="" required></li>
      <li><input type="text" name="attendee5" value="" required></li>
    </ol>
    <h2>Topic Discussion/Meeting Notes</h2>
    <table>
      <thead>
        <tr>
          <th>Topic</th>
          <th>Duration (min)</th>
          <th>Discussion/Meeting Notes</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1. <textarea name="topic1" required></textarea></td>
          <td><input type="text" name="duration1" required></td>
          <td><textarea name="note1" required></textarea></td>
        </tr>
        <tr>
          <td>2. <textarea name="topic2" required></textarea></td>
          <td><input type="text" name="duration2" required></td>
          <td><textarea name="note2" required></textarea></td>
        </tr>
        <tr>
          <td>3. <textarea name="topic3" required></textarea></td>
          <td><input type="text" name="duration3" required></td>
          <td><textarea name="note3" required></textarea></td>
        </tr>
        <tr>
          <td>4. <textarea name="topic4" required></textarea></td>
          <td><input type="text" name="duration4" required></td>
          <td><textarea name="note4" required></textarea></td>
        </tr>
        <tr>
          <td>5. <textarea name="topic5" required></textarea></td>
          <td><input type="text" name="duration5" required></td>
          <td><textarea name="note5" required></textarea></td>
        </tr>
        <tr>
          <td>6. <textarea name="topic6" required></textarea></td>
          <td><input type="text" name="duration6" required></td>
          <td><textarea name="note6" required></textarea></td>
        </tr>
        <tr>
          <td>7. <textarea name="topic7" required></textarea></td>
          <td><input type="text" name="duration7" required></td>
          <td><textarea name="note7" required></textarea></td>
        </tr>
        <tr>
          <td>8. <textarea name="topic8" required></textarea></td>
          <td><input type="text" name="duration8" required></td>
          <td><textarea name="note8" required></textarea></td>
        </tr>
        <tr>
          <td>9. <textarea name="topic9" required></textarea></td>
          <td><input type="text" name="duration9" required></td>
          <td><textarea name="note9" required></textarea></td>
        </tr>
        <tr>
          <td>10. <textarea name="topic10" required></textarea></td>
          <td><input type="text" name="duration10" required></td>
          <td><textarea name="note10" required></textarea></td>
        </tr>
        <tr>
          <td>11. <textarea name="topic11" required></textarea></td>
          <td><input type="text" name="duration11" required></td>
          <td><textarea name="note11" required></textarea></td>
        </tr>
        <tr>
          <td>12. <textarea name="topic12" required></textarea></td>
          <td><input type="text" name="duration12" required></td>
          <td><textarea name="note12" required></textarea></td>
        </tr>
        <tr>
          <td>13. <textarea name="topic13" required></textarea></td>
          <td><input type="text" name="duration13" required></td>
          <td><textarea name="note13" required></textarea></td>
        </tr>
        <tr>
          <td>14. <textarea name="topic14" required></textarea></td>
          <td><input type="text" name="duration14" required></td>
          <td><textarea name="note14" required></textarea></td>
        </tr>
        <tr>
          <td>15. <textarea name="topic15" required></textarea></td>
          <td><input type="text" name="duration15" required></td>
          <td><textarea name="note15" required></textarea></td>
        </tr>
        <tr>
          <td>16. <textarea name="topic16" required></textarea></td>
          <td><input type="text" name="duration16" required></td>
          <td><textarea name="note16" required></textarea></td>
        </tr>
        <tr>
          <td>17. <textarea name="topic17" required></textarea></td>
          <td><input type="text" name="duration17" required></td>
          <td><textarea name="note17" required></textarea></td>
        </tr>
        <tr>
          <td>18. <textarea name="topic18" required></textarea></td>
          <td><input type="text" name="duration18" required></td>
          <td><textarea name="note18" required></textarea></td>
        </tr>
        <tr>
          <td>19. <textarea name="topic19" required></textarea></td>
          <td><input type="text" name="duration19" required></td>
          <td><textarea name="note19" required></textarea></td>
        </tr>
        <tr>
          <td>20. <textarea name="topic20" required></textarea></td>
          <td><input type="text" name="duration20" required></td>
          <td><textarea name="note20" required></textarea></td>
        </tr>
        <tr>
          <td>21. <textarea name="topic21" required></textarea></td>
          <td><input type="text" name="duration21" required></td>
          <td><textarea name="note21" required></textarea></td>
        </tr>
        <tr>
          <td>22. <textarea name="topic22" required></textarea></td>
          <td><input type="text" name="duration22" required></td>
          <td><textarea name="note22" required></textarea></td>
        </tr>
      </tbody>
    </table>
    <p><strong>Prepared By:</strong><br><input type="text" id="preparedBy" name="preparedBy" value="" required></p>
    <h2>Signature:</h2>
    <canvas id="signatureCanvas"></canvas>
    <button type="button" id="clearSignature">Clear Signature</button>
    <button type="button" onclick="saveProgress()">Save Progress</button>
    <button type="button" onclick="generatePDF()">Save as PDF</button>
  </form>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
  <script>
    const { jsPDF } = window.jspdf;

    // Function to save progress
    function saveProgress() {
      const form = document.getElementById('meetingForm');
      const formData = new FormData(form);
      const data = {};
      formData.forEach((value, key) => {
        data[key] = value;
      });
      const signature = document.getElementById('signatureCanvas').toDataURL();
      data.signature = signature;
      localStorage.setItem('meetingFormData', JSON.stringify(data));
      alert('Progress saved successfully!');
    }

    // Function to load progress
    function loadProgress() {
      const data = JSON.parse(localStorage.getItem('meetingFormData'));
      if (data) {
        Object.keys(data).forEach(key => {
          const element = document.querySelector(`[name="${key}"]`);
          if (element) {
            element.value = data[key];
          }
        });
        if (data.signature) {
          const canvas = document.getElementById('signatureCanvas');
          const ctx = canvas.getContext('2d');
          const img = new Image();
          img.onload = function () {
            ctx.drawImage(img, 0, 0);
          }
          img.src = data.signature;
        }
      }
    }

    // Function to generate PDF
    function generatePDF() {
      const doc = new jsPDF();
      const titleFontSize = 20;
      const subtitleFontSize = 14;
      const textFontSize = 10;
      const marginLeft = 5;
      const pageHeight = doc.internal.pageSize.height;
      let startY = 10;

      function addText(text, fontSize, marginY = 5, lineHeight = 0.5) {
        const textLines = doc.splitTextToSize(text, 190);
        doc.setFontSize(fontSize);
        textLines.forEach((line, index) => {
          if (startY + fontSize * lineHeight > pageHeight - 10) {
            doc.addPage();
            startY = 10;
          }
          doc.text(line, marginLeft, startY);
          startY += fontSize * lineHeight;
        });
        startY += marginY;
      }

      addText('Management Meeting', titleFontSize, 4, 1);
      addText('MEETING AGENDA', subtitleFontSize, 4, 1);
      addText(`Date: ${document.getElementById('date').value}`, textFontSize, 4, 1);
      addText(`Last Meeting: ${document.getElementById('lastMeeting').value}`, textFontSize, 4, 1);
      addText(`Purpose of Meeting: ${document.getElementById('purpose').value}`, textFontSize, 4, 1);
      addText(`Time: ${document.getElementById('time').value}`, textFontSize, 4, 1);
      addText(`Location: ${document.getElementById('location').value}`, textFontSize, 4, 1);
      addText(`Chair: ${document.getElementById('chair').value}`, textFontSize, 4, 1);
      addText(`Secretary: ${document.getElementById('secretary').value}`, textFontSize, 10, 1);
      addText('Summary of Last Meeting', subtitleFontSize, 10, 1);
      addText(`${document.getElementById('summaryLastMeeting').value}`, textFontSize, 5, 1.5);

      addText('ATTENTION:', subtitleFontSize, 10, 1);
      addText('It is extremely important for you to read this agenda prior to attending the meeting. In order for you to be prepared, you must read the meeting agenda and come to the meeting prepared with any information, suggestions, or concerns you may have regarding the topics provided.', textFontSize, 5);
      addText('If there is a topic not yet listed that you find important, please contact the staff member who created the agenda in order to provide your suggested topic. Please also provide a note for the description of points that can be discussed.', textFontSize, 5);
      addText('DURING THE MEETING: Your input is important; please provide your opinions as it assists the company in its growth.', textFontSize, 10);

      addText('ATTENDEES:', subtitleFontSize, 10, 1);
      for (let i = 1; i <= 5; i++) {
        addText(`${i}. ${document.querySelector(`input[name="attendee${i}"]`).value}`, textFontSize, 5);
      }

      addText('Topic Discussion/Meeting Notes', subtitleFontSize, 10, 1);
      const tableData = [];
      for (let i = 1; i <= 22; i++) {
        tableData.push([
          document.querySelector(`textarea[name="topic${i}"]`).value,
          document.querySelector(`input[name="duration${i}"]`).value,
          document.querySelector(`textarea[name="note${i}"]`).value
        ]);
      }

      tableData.forEach((row, index) => {
        addText(`Topic ${index + 1}: ${row[0]}`, textFontSize, 4, 0.5);
        addText(`Duration: ${row[1]} minutes`, textFontSize, 4, 1);
        addText(`Note: ${row[2]}`, textFontSize, 10, 0.5);
      });

      addText(`Prepared By: ${document.getElementById('preparedBy').value}`, textFontSize, 10);

      // Add signature to the PDF
      const signature = document.getElementById('signatureCanvas').toDataURL('image/png');
      doc.addImage(signature, 'PNG', marginLeft, startY + 10, 80, 40);

      doc.save('Management_Meeting_Agenda.pdf');
    }

    // Signature canvas functionality
    const canvas = document.getElementById('signatureCanvas');
    const ctx = canvas.getContext('2d');
    let isDrawing = false;

    canvas.addEventListener('mousedown', e => {
      isDrawing = true;
      ctx.beginPath();
      ctx.moveTo(e.offsetX, e.offsetY);
    });

    canvas.addEventListener('mousemove', e => {
      if (isDrawing) {
        ctx.lineTo(e.offsetX, e.offsetY);
        ctx.stroke();
      }
    });

    canvas.addEventListener('mouseup', () => {
      if (isDrawing) {
        ctx.stroke();
        ctx.closePath();
        isDrawing = false;
      }
    });

    canvas.addEventListener('mouseout', () => {
      if (isDrawing) {
        ctx.stroke();
        ctx.closePath();
        isDrawing = false;
      }
    });

    document.getElementById('clearSignature').addEventListener('click', () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    });

    window.onload = loadProgress;
  </script>

</body>

</html>
